flowchart TD

    subgraph SMEPro Platform["SMEPro Platform"]
        direction TB

        subgraph Infra["RI‑42 Reasoning Infrastructure"]
            direction TB

            YBR["Yellow Brick Road (YBR) Cognitive Pipeline
            • Layer 1: RAG Retrieval
            • Layer 2: Context Understanding
            • Layer 3: Reasoning & Deviation Scoring
            • Layer 4: PreCognition (Risk Forecasting)
            • Layer 5: Loop Memory"]

            Personas["Persona Orchestration
            • Engineering
            • Legal
            • Operations
            • Finance
            • Safety"]

            SafeAI["Safe AI Governance
            • Warning → Advisory → Timeout → Ban
            • Output validation
            • Compliance enforcement"]

            RAG["Knowledge Substrate (pgvector)
            • Vault
            • RAG Index
            • Ontologies (NAICS, CIP, Compliance)
            • Document Provenance"]

            Routing["Routing Engine
            • Model Tiering (SMEPro I)
            • Persona Selection
            • Rule Evaluation"]

        end

        Apps["SMEPro Applications
        • Digital Concierge
        • Guided Workflows
        • Compliance Assist
        • Engineering Assist
        • Audit & Reporting"]

        UI["User Interfaces
        • Web App
        • Mobile
        • API Integrations"]

    end

    UI --> Apps
    Apps --> Infra
    Infra --> RAG
    Infra --> Personas
    Infra --> SafeAI
    Infra --> Routing
    Routing --> YBR
    YBR --> Apps
